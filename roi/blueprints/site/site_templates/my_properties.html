{% extends 'base.html' %}

{% block head %}

{% endblock %}

{% block header %}{% endblock %}

{% block body %}
<div class="container">
    <div class="row mt-5">
        <div class="col d-flex justify-content-sm-center">
            <h1>My Properties</h1>
        </div>
    </div>
</div>
{% if no_properties %}
    <div class="container">
        <div class="row mt-5">
            <div class="col d-flex justify-content-sm-center">
                <h2>You have not registered any properites yet.</h2>
            </div>
        </div>
        <div class="row">
            <div class="col d-flex justify-content-sm-center">
                <button type="button" class="btn btn-primary mt-5" style="width:200px" onclick="window.location.href='{{url_for('add_edit')}}'">Add Property</button>
            </div>
        </div>
    </div>
    
{% else %}
<div class="container">
    <div class="row mt-5">
        <div class="col">
            <button type="button" class="btn btn-primary mb-5" onclick="window.location.href='{{url_for('add_edit')}}'">Add Property</button>
        </div>
    </div>
</div>

{% for property in properties %}
<div class="container">
    <div class="row mt-5">
        <div class="col ">
            <h3>Property: {{ property.address }}</h3>
            <div class="mb-3">Purchase Price: <span class='currency'>{{ property.purch_price }}</span></div>
            <div class="mb-3">Estimated Rent: <span class='currency'>{{ property.est_rent }}</span> </div>
            <form action="/Income/{{property.prop_id}}" method="POST">
                <button type="submit" class="btn btn-primary mb-3">Add Income</button>
            </form>
            <form action="/Expense/{{property.prop_id}}" method="POST">
                <button type="submit" class="btn btn-primary mb-3">Add Expense</button>
            </form>
            <a href="/view-exp-inc/{{property.prop_id}}" class="veiw">View Income and Expenses for this property</a>
        </div>
    </div>
</div>
<hr>
{% endfor %}
{% endif %}
<script>
    const USD = new Intl.NumberFormat('en-US',{
        locales:'en-US',
        maximumSignificantDigits:3,
        minimumFractionDigits:2,
        maximumFractionDigits:3,
        style:"currency",
        currency:"USD",
    })

    let x = document.querySelectorAll(".currency");
    for (let i = 0, len = x.length; i < len; i++) {
        let num = Number(x[i].innerHTML)
        x[i].innerHTML=USD.format(num)
    }
</script>
{% endblock %}